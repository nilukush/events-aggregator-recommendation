# Render Blueprint for EventNexus Background Worker
# This defines a Cron Job that runs periodically to ingest events

services:
  # Cron job for event ingestion - runs every hour
  - type: cron
    name: event-ingestion-hourly
    runtime: node
    schedule: "0 * * * *"
    buildCommand: npm install
    startCommand: npm run worker
    region: singapore
    envVars:
      - key: NODE_VERSION
        value: 20
      - key: INGEST_URL
        value: https://events-aggregator-recommendation.vercel.app/api/ingest
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_ANON_KEY
        sync: false
      - key: CITY
        value: Dubai
      - key: LAT
        value: 25.2048
      - key: LNG
        value: 55.2708
      - key: RADIUS_KM
        value: 50
